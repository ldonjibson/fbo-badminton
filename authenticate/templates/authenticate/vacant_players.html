{% extends 'authenticate/base.html' %}
{% load static %}

{% block content %}

<h1>Players</h1>
{% if user.is_authenticated %}

<div class="container">
  <div class="row">
    <div class="col-sm">
      <table class="table table-hover">
    <thead>
        <tr>
            <th scope="col">Event</th>
            <th scope="col">Player</th>
            <th scope="col">Country</th>
            <th scope="col">Price(£)</th>
            <th scope="col">Last Tournament</th>
            <th scope="col">Current Tournament</th>
          </tr>
      </thead>
      <tbody>

      {% for player in MSplayers %}
        <tr>
          <th scope="row">MS</th>
          <td><a href="#">{{ player.name }}</a></td>
          <td>{{ player.country }}</td>
          <td>{{ player.cost }}</td>
          <td>{{ player.last_tournament_score }}</td>
          <td>{{ player.current_tournament_score }}</td>
          <td>{% if team.MSplayers.all|length < 3 %}<a href="{% url 'buy_player' player_type=player.get_type player_pk=player.pk %}" class="btn btn-danger" role="button">Buy</a>
          {% else %}<a href="#" class="btn btn-danger" role="button">No slots for {{ player.get_type }}</a>
          {% endif %}</td>
        </tr>
      {% endfor %}
      {% for player in WSplayers %}
        <tr>
          <th scope="row">WS</th>
          <td><a href="#">{{ player.name }}</a></td>
          <td>{{ player.country }}</td>
          <td>{{ player.cost }}</td>
          <td>{{ player.last_tournament_score }}</td>
          <td>{{ player.current_tournament_score }}</td>
          <td>{% if team.WSplayers.all|length < 2 %}<a href="{% url 'buy_player' player_type=player.get_type player_pk=player.pk %}" class="btn btn-danger" role="button">Buy</a>
          {% else %}<a href='#' class="btn btn" role="button">No place for more {{ player.get_type }}</a>
          {% endif %}</td>
        </tr>
      {% endfor %}
      {% for player in MDplayers %}
        <tr>
          <th scope="row">MD</th>
          <td><a href="#">{{ player.name }}</a></td>
          <td>{{ player.country }}</td>
          <td>{{ player.cost }}</td>
          <td>{{ player.last_tournament_score }}</td>
          <td>{{ player.current_tournament_score }}</td>

          <td>{% if team.MDplayers.all|length < 3 %}<a href="{% url 'buy_player' player_type=player.get_type player_pk=player.pk %}" class="btn btn-danger" role="button">Buy</a>
          {% else %}<a href="#" class="btn btn-danger" role="button">No slots for {{ player.get_type }}</a>
          {% endif %}</td>
        </tr>
      {% endfor %}
      {% for player in WDplayers %}
        <tr>
          <th scope="row">WD</th>
          <td><a href="#">{{ player.name }}</a></td>
          <td>{{ player.country }}</td>
          <td>{{ player.cost }}</td>
          <td>{{ player.last_tournament_score }}</td>
          <td>{{ player.current_tournament_score }}</td>
          <td>{% if team.WDplayers.all|length < 3 %}<a href="{% url 'buy_player' player_type=player.get_type player_pk=player.pk %}" class="btn btn-danger" role="button">Buy</a>
          {% else %}<a href="#" class="btn btn-danger" role="button">No slots for {{ player.get_type }}</a>
          {% endif %}</td>
        </tr>
      {% endfor %}
      {% for player in XDplayers %}
        <tr>
          <th scope="row">XD</th>
          <td><a href="#">{{ player.name }}</a></td>
          <td>{{ player.country }}</td>
          <td>{{ player.cost }}</td>
          <td>{{ player.last_tournament_score }}</td>
          <td>{{ player.current_tournament_score }}</td>
          <td>{% if team.XDplayers.all|length < 3 %}<a href="{% url 'buy_player' player_type=player.get_type player_pk=player.pk %}" class="btn btn-danger" role="button">Buy</a>
          {% else %}<a href="#" class="btn btn-danger" role="button">No slots for {{ player.get_type }}</a>
          {% endif %}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
    </div> 

    <div class="col-sm..offset-md-4">
      <div class="card border-danger mb-3" style="width: 18rem;">
        <div class="card-header">
        TEAM NAME
        </div>
        <ul class="list-group list-group-flush">
          <li class="list-group-item"><strong>Overall points:</strong> 1,234</br><strong>Global rank:</strong> 101</br><strong>Total players:</strong> 100,500</li>
          <li class="list-group-item"><strong>Current tournament points:</strong> 69</li>
          <li class="list-group-item"><a href="#"><strong>Your leagues</strong></a></li>
        </ul>
      </div>
      <div class="container border-danger">
        <div class="row">
          <div class="col-sm.offset-md-4">
          <table class="table table-hover">
            <tbody>
              <tr>
                <th scope="row">BUDGET (£)</th>
                <td>{{ team.budget }}</td>
              </tr>
              <tr>
                <th scope="row">TEAM VALUE (£)</th>
                <td>{{ team.get_team_value }}</td>
              </tr> 
            </tbody>
          </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 
            
</br>


{% endif %}
{% endblock %}